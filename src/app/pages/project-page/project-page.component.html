<div class="project-page">
  <div class="project-title-and-new-assignment">
    <button class="button" (click)="openNewAssignmentPopup()">Add assignment</button>
    <button class="button" (click)="addUserToProjectPopup()">Add User to Project</button>

    <form [formGroup]="addUserToProjectForm" (submit)="sendNewUserToProject(addNewUser.value)" class="add-new-assignment" *ngIf="addUserToProject">
      <div class="add-new-assignment-input">
        <input type="email" name="" id="addUser" #addNewUser formControlName="email" placeholder="Enter user email:">
        <div *ngIf="email?.errors?.['email']" class="input-messages">
          El formato del email es incorrecto
        </div>
        <div *ngIf="showAddNewUserMessages[0]" class="input-messages">Enviando...</div>
        <div *ngIf="showAddNewUserMessages[1]" class="input-messages">Usuario a√±adido!</div>
        <div *ngIf="showAddNewUserMessages[2]" class="input-messages">Ese usuario no esta registrado</div>
      </div>
      <div class="add-new-assignment-buttons">
        <button type="submit" [disabled]="!addUserToProjectForm.valid"><span class="material-icons">send</span></button>
        <button (click)="closeAddUserToProjectPopup()"><span class="material-icons">close</span></button>
      </div>
    </form>

    <app-new-assignment-form *ngIf="newAssignmentPopup" [projectId]="projectId" 
                                      (reloadAssignmentsAndClosePopup)="closeNewAssignmentPopup()" 
                                      (closePopup)="closeNewAssignmentPopup()">
    </app-new-assignment-form>
    <div class="project-title">
      {{userProject?.name}}
    </div>
    <button class="button" (click)="deleteProject()">Delete Project</button>
  </div>
  <div class="project-tasks">
    <div class="pending-tasks">
      <app-pending-tasks [pendingAssignments]="pendingAssignments" (reloadAssignments)="changeInAssignments()"></app-pending-tasks>
    </div>
    <div class="ongoing-tasks">
      <app-ongoing-tasks [ongoingAssignments]="ongoingAssignments" (reloadAssignments)="changeInAssignments()"></app-ongoing-tasks>
    </div>
    <div class="for-review-tasks">
      <app-for-review-tasks [forReviewAssignments]="forReviewAssignments" (reloadAssignments)="changeInAssignments()"></app-for-review-tasks>
    </div>
    <div class="completed-tasks">
      <app-completed-tasks [completedAssignments]="completedAssignments" (reloadAssignments)="changeInAssignments()"></app-completed-tasks>
    </div>
  </div>
</div>
